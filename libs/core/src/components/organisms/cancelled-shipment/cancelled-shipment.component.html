<!-- 9fbef606107a605d69c0edbcd8029e5d_SYMPHONY -->
<ng-template
  #shipmentNumberTemplate
  let-columnData="columnData"
  let-rowData="rowData"
>
  <div>
    <span>{{ columnData }}</span
    >&nbsp;
    <i
      class="symphony-icons symphony-icons-exclamation-triangle"
      [ngClass]="[rowData.cancelledDate ? 'error' : 'warning']"
      aria-hidden="true"
    ></i>
  </div>
</ng-template>
<ng-template
  #shipmentNumberTemplatePostSales
  let-columnData="columnData"
  let-rowData="rowData"
>
  <div>
    <span>{{ columnData }}</span
    >&nbsp;
    <i
      class="symphony-icons symphony-icons-exclamation-triangle"
      [ngClass]="[
        rowData.cancelledDate
          ? 'error'
          : rowData.shipmentLineCanceledFlag?.toLowerCase() ===
            partiallyCancelledShipmentYes
          ? 'warning'
          : ''
      ]"
      aria-hidden="true"
      *ngIf="
        rowData.cancelledDate ||
        rowData.shipmentLineCanceledFlag?.toLowerCase() ===
          partiallyCancelledShipmentYes
      "
    ></i>
  </div>
</ng-template>

<ng-template #entirelyCanceledTemplate let-rowData="rowData">
  <div>
    <i
      class="symphony-icons symphony-icons-exclamation-triangle"
      [ngClass]="[rowData.cancelledDate ? 'error' : 'warning']"
      aria-hidden="true"
    ></i>
    <span>{{
      (rowData.cancelledDate
        ? "lbl_shipment_entirelyCancelled"
        : "lbl_shipment_partiallyCancelled"
      ) | content
    }}</span>
  </div>
</ng-template>
<ng-template #entirelyCanceledTemplatePostSales let-rowData="rowData">
  <div
    *ngIf="
      rowData.cancelledDate ||
      rowData.shipmentLineCanceledFlag?.toLowerCase() ===
        partiallyCancelledShipmentYes
    "
  >
    <i
      class="symphony-icons symphony-icons-exclamation-triangle"
      [ngClass]="[
        rowData.cancelledDate
          ? 'error'
          : rowData.shipmentLineCanceledFlag?.toLowerCase() ===
            partiallyCancelledShipmentYes
          ? 'warning'
          : ''
      ]"
      aria-hidden="true"
    ></i>
    <span>{{
      (rowData.cancelledDate
        ? "lbl_shipment_entirelyCancelled"
        : "lbl_shipment_partiallyCancelled"
      ) | content
    }}</span>
  </div>
</ng-template>

<ng-template #cancelledReasonTemplate let-rowData="rowData">
  <div>
    <span>{{
      rowData.cancelledDate
        ? rowData.reason
        : rowData.shipmentLineCanceledReason
    }}</span>
  </div>
</ng-template>

<ng-template #cancelledDateTemplate let-rowData="rowData">
  <div>
    <span *ngIf="rowData.cancelledDate || rowData.shipmentLineCanceledDateTime"
      >{{
        rowData.cancelledDate || rowData.shipmentLineCanceledDateTime
          | dateFormatter
      }}
    </span>
  </div>
</ng-template>
<ng-template #cancelledDateTemplateWithTimeZone let-rowData="rowData">
  <div>
    <span *ngIf="rowData.cancelledDate || rowData.shipmentLineCanceledDateTime"
      >{{
        rowData.cancelledDate || rowData.shipmentLineCanceledDateTime
          | dateFormatter: undefined:rowData.shipmentCanceledDateTimeZone
      }}
    </span>
  </div>
</ng-template>

<button
  *ngIf="!isDesktopViewport && !showCancelledShipmentsTable && showAccordion"
  class="cancelled-shipment-header"
  (click)="onCancelledShipmentsHeaderClick()"
>
  <div>
    <i
      class="symphony-icons symphony-icons-cancelled-shipment"
      aria-hidden="true"
    ></i>
    <span class="cancelled-shipment-header-title">
      <span>
        {{ cancelledShipmentHeaderText }}
      </span>
      <span *ngIf="!hasApiFailed">
        ({{ cancelledShipmentList?.length || 0 }})
      </span>
    </span>
  </div>

  <i
    class="angle-right symphony-icons symphony-icons-angle-right"
    aria-hidden="true"
  ></i>
</button>

<div
  class="cancelled-shipment-list-title"
  *ngIf="!isDesktopViewport && showCancelledShipmentsTable"
>
  {{ "lbl_canceled_shipments" | content }}
</div>

<div
  class="shipment-list-table cancelled-shipment-table"
  *ngIf="isDesktopViewport || showCancelledShipmentsTable || !showAccordion"
>
  <lib-data-table
    *ngIf="columnInfo"
    [showTable]="!hasApiFailed"
    [attr.data-automation]="dataAutomationAttr + '-card'"
    [dataAutomationHeader]="dataAutomationAttr + '-header'"
    [dataAutomationTitle]="dataAutomationAttr + '-title'"
    [dataAutomationTooltip]="dataAutomationAttr + '-tooltip'"
    [dataAutomationAttrFilterChip]="dataAutomationAttrFilterChip"
    [showInfoIcon]="showInfoIcon"
    [tableTitle]="title"
    headericon="cancelled-shipment"
    [displayedColumns]="displayedColumnsForTable"
    [tableData]="cancelledShipmentList"
    [columnInfo]="columnInfo"
    rowClickable="true"
    (emitRowData)="getClickedRowData($event)"
    firstColumnSticky="true"
    tableMinWidth="800"
    [dataAutomationAttribute]="dataAutomationAttr"
    noRecordMessage=" {{ 'lbl_no_cancelled_shipments' | content }}"
    viewportMinWidthToShowScroll="1200"
    [pageSizePerViewport]="pageSizePerViewport"
    [customStyle]="customStyle"
    [errorReason]="errorReason"
    [pageSection]="pageSection"
    rowAriaLabel=" {{ 'lbl_click_to_view_shipment' | content }}"
    [defaultSortingColumn]="defaultSortingColumn"
    [defaultSortingOrder]="defaultSortingOrder"
    [showFilterChip]="showFilterChip"
    (openFilter)="openFilter.emit($event)"
    [selectedFilters]="selectedFilters"
    [defaultFilters]="defaultFilters"
    [componentFilterId]="componentFilterId"
    [canExport]="canExport"
    [pageName]="pageName + '_' + title"
    [sheetName]="title"
  ></lib-data-table>
</div>
