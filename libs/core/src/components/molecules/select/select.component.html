<!-- 9fbef606107a605d69c0edbcd8029e5d_SYMPHONY -->
<ng-container [ngSwitch]="variation">
  <div *ngSwitchCase="'default'" class="{{ className }}">
    <span *ngIf="label" class="select-label" [ngStyle]="labelStyle">
      {{ label }}
    </span>
    <mat-form-field
      *ngIf="!userAgentUtility.isIE()"
      appearance="outline"
      [ngStyle]="customStyle"
      [ngClass]="noBorder ? 'no-border' : ''"
    >
      <mat-select
        #matSelect
        [(value)]="selectedValue"
        panelClass="{{
          'expand-panel ' + (className ? className + '-overlay' : '')
        }}"
        (selectionChange)="changeValue($event.value)"
        [formControlName]="controlName"
        disableOptionCentering
        [attr.data-automation]="dataAutomationAttribute"
        [aria-label]="ariaLabel"
        [placeholder]="placeholder"
        role="combobox"
        (focus)="matSelectClick()"
        (openedChange)="handleSelectToggle()"
      >
        <mat-select-trigger *ngIf="showSelectValueToUser">
          {{ selectedValue }}
        </mat-select-trigger>
        <mat-option *ngIf="showPlaceholderAsOption" value="{{ null }}">{{
          placeholder
        }}</mat-option>
        <mat-option
          [attr.data-automation]="
            showAutomationAttrForOptions
              ? dataAutomationAttribute +
                '-' +
                list.value?.toLowerCase().replace(automationAttrRegex, '-') +
                '-option'
              : null
          "
          *ngFor="let list of optionLists"
          [value]="list.value"
        >
          {{ getValueFromCMS ? (list.viewValue | content) : list.viewValue }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <select
      *ngIf="userAgentUtility.isIE()"
      (change)="changeValue($event.target.value)"
      [formControlName]="controlName"
      [attr.data-automation]="dataAutomationAttribute"
      [attr.aria-label]="ariaLabel"
      class="native-select"
      [ngStyle]="customStyle"
      [ngClass]="noBorder ? 'no-border' : ''"
    >
      <option
        *ngFor="let list of optionLists"
        [attr.data-automation]="
          showAutomationAttrForOptions
            ? dataAutomationAttribute +
              '-' +
              list.value?.toLowerCase().replace(automationAttrRegex, '-') +
              '-option'
            : null
        "
        [ngValue]="list.value"
      >
        {{ getValueFromCMS ? (list.viewValue | content) : list.viewValue }}
      </option>
    </select>
  </div>
  <div
    *ngSwitchCase="multiple"
    class="{{ 'multiple-select ' + className }}"
    [ngClass]="{ 'show-error-state': showErrorState }"
  >
    <span *ngIf="label" class="select-label" [ngStyle]="labelStyle">
      {{ label }}
    </span>

    <mat-form-field
      appearance="outline"
      [ngStyle]="customStyle"
      [ngClass]="noBorder ? 'no-border' : ''"
    >
      <mat-select
        panelClass=" {{
          'expand-panel mat-option-wrapper ' + className + '-panel'
        }}"
        [attr.data-automation]="dataAutomationAttribute"
        [aria-label]="ariaLabel"
        role="combobox"
        floatlLabel="never"
        [(value)]="selectedValues"
        disableOptionCentering
        placeholder=" {{
          (fixedLabel || label) + ' (' + selectionCount + ') '
        }}"
        [formControlName]="controlName"
        (selectionChange)="changeValue($event.value)"
        (focus)="matSelectClick()"
        multiple
      >
        <mat-select-trigger>
          {{
            (fixedLabel || label) + " (" + (selectionCount | titlecase) + ") "
          }}
        </mat-select-trigger>

        <mat-option
          *ngIf="showSelectAllOption"
          #selectAllOption
          [value]="selectAllValue"
        >
          {{ selectAllCheckboxText }}
        </mat-option>

        <mat-option *ngFor="let list of optionLists" [value]="list">
          <i
            *ngIf="showColorsInMultiSelect"
            class="symphony-icons symphony-icons-circle mode-circle"
            aria-hidden="true"
            [ngClass]="['mode-color-' + optionLists.indexOf(list)]"
          ></i>
          {{ list }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <div *ngSwitchCase="searchableSingleSelect" class="{{ className }}">
    <span *ngIf="label" class="select-label" [ngStyle]="labelStyle">
      {{ label }}
    </span>
    <mat-form-field
      appearance="outline"
      [ngStyle]="customStyle"
      [ngClass]="noBorder ? 'no-border' : ''"
    >
      <mat-select
        #matSelect
        [(value)]="selectedValue"
        panelClass="{{
          'expand-panel ' + (className ? className + '-overlay' : '')
        }}"
        (selectionChange)="changeValue($event.value)"
        [formControlName]="controlName"
        disableOptionCentering
        [attr.data-automation]="dataAutomationAttribute"
        [aria-label]="ariaLabel"
        [placeholder]="placeholder"
        role="combobox"
        (focus)="matSelectClick()"
        (openedChange)="handleSelectToggle()"
      >
        <mat-select-trigger *ngIf="showSelectValueToUser">
          {{ selectedValue }}
        </mat-select-trigger>
        <lib-select-search-input
          [formControl]="modelFilterControl"
          [placeholderLabel]="'lbl_account_search_placeholder' | content"
          [noEntriesFoundLabel]="'lbl_account_no_entries_label' | content"
        ></lib-select-search-input>
        <mat-option
          *ngFor="let list of filteredOptionLists | async"
          [value]="list.value"
        >
          {{ getValueFromCMS ? (list.viewValue | content) : list.viewValue }}
          <i
            aria-hidden="true"
            *ngIf="list.selected"
            class="symphony-icons symphony-icons-checkMark correct"
          ></i>
        </mat-option>
        <mat-option
          *ngIf="
            footerLabel &&
            optionLists.length > optionsLimit &&
            (filteredOptionLists | async).length >= optionsLimit
          "
          class="footer-item"
          [value]="'footer-value'"
        >
          <div class="body3 footer-link link">{{ footerLabel }}</div>
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
</ng-container>
