<!-- 9fbef606107a605d69c0edbcd8029e5d_SYMPHONY -->
<div
  [ngClass]="[getCustomClass(), !showChart ? 'd-none' : '']"
  class="chart-parent"
  [id]="chartParentId"
>
  <div class="y-axis-label body5" *ngIf="yAxisLabel !== ''; else defaultLabel">
    {{ yAxisLabel }}
  </div>
  <ng-template #defaultLabel>
    <div class="y-axis-label body5" *ngIf="showYAxesLabel">
      {{ defaultLabelContent | content }}
    </div>
  </ng-template>

  <div class="chartjs-container">
    <div
      class="canvas-container"
      [ngClass]="{ 'donut-container': chartType === chartTypeDonut }"
    >
      <canvas
        #canvas
        [id]="chartId"
        [attr.aria-describedby]="chartId + 'Table'"
        role="img"
        [ngClass]="[getCustomClass()]"
      >
      </canvas>
    </div>
    <!-- <div
      class="chart-wrapper"
      *ngIf="showDonutChartDrilldown || chartType === chartTypeDonut"
    >
      <donut-chart-legends
        [showDonutChartDrilldown]="showDonutChartDrilldown"
        (removeDonutChartDrilldown)="removeDonutChartDrilldown()"
        [chartData]="chartData"
        [drillDownTitle]="donutChartClickedLegend"
        [hideDrillDownButtonLabel]="hideDrillDownButtonLabel"
        [bgColor]="bgColor"
        [component]="component"
      ></donut-chart-legends>
    </div> -->
  </div>
  <table [id]="chartId + 'Table'" class="sr-only">
    <caption class="sr-only">
      {{
        ariaLabel
      }}
    </caption>
    <thead class="sr-only">
      <tr>
        <th *ngIf="chartData.datasets?.length > 1" scope="col">
          {{ "modes" }}
        </th>
        <ng-container [ngTemplateOutlet]="emitClickEvent ? clickableRowHeader : nonClickableRowHeader"></ng-container>
      </tr>
    </thead>
    <tbody class="sr-only">
      <tr *ngFor="let dataset of chartData.datasets; let i = index">
        <td *ngIf="chartData.datasets?.length > 1">
          {{ dataset.label }}
        </td>
        <ng-container [ngTemplateOutlet]="emitClickEvent ? clickableRow : nonClickableRow" [ngTemplateOutletContext]="{dataset: dataset}"></ng-container>
      </tr>
    </tbody>
  </table>
</div>

<ng-template #clickableRowHeader>
  <th *ngFor="let column of chartData.labels; let a = index" scope="col" (click)="clickOnAccessibilityTable(a)" (keydown.enter)="clickOnAccessibilityTable(a)">
    {{ column }}
  </th>
</ng-template>

<ng-template #nonClickableRowHeader>
  <th *ngFor="let column of chartData.labels; let a = index" scope="col">
    {{ column }}
  </th>
</ng-template>

<ng-template #clickableRow let-dataset='dataset'>
  <td *ngFor="let value of dataset.data; let a = index" (click)="clickOnAccessibilityTable(a)" (keydown.enter)="clickOnAccessibilityTable(a)">
    {{ value }}
  </td>
</ng-template>

<ng-template #nonClickableRow let-dataset='dataset'>
  <td *ngFor="let value of dataset.data; let a = index">
    {{ value }}
  </td>
</ng-template>



<div [ngClass]="{ 'd-none': showChart }">
  <div
    class="no-chart-data"
    *ngIf="noDataMessage !== ''; else defaultMessage"
    [ngStyle]="getNoDataHeight()"
  >
    <span class="no-data-icon-bg-small">
      <i
        class="symphony-icons symphony-icons-component-error no-data-icon"
        aria-hidden="true"
      ></i>
    </span>
    <span class="body2">{{ noDataMessage }}</span>
  </div>
  <ng-template #defaultMessage>
    <div class="no-chart-data" [ngStyle]="getNoDataHeight()">
      <span class="no-data-icon-bg-small">
        <i
          class="symphony-icons symphony-icons-component-error no-data-icon"
        ></i>
      </span>
      <span class="body2">{{ "lbl_data_not_available_chart" | content }}</span>
    </div>
  </ng-template>
</div>
