<!-- 9fbef606107a605d69c0edbcd8029e5d_SYMPHONY -->

<lib-data-table
  *ngIf="documentsRes?.isLoaded"
  [showTable]="showTable && !documentsRes?.errorDetails"
  tableTitle="{{ 'lbl_documents' | content }} ({{
    documentsRes?.data ? documentsRes?.data.length : 0
  }})"
  class="documents-table"
  data-automation="documentsCard"
  dataAutomationHeader="documentsTitle"
  headericon="upload-document"
  dataAutomationAttribute="tblDocumentsDetails"
  defaultSortingColumn="createdDate"
  defaultSortingOrder="desc"
  [displayedColumns]="documentDisplayedColumns"
  [tableData]="documentsRes?.data || []"
  [columnInfo]="tableColumnData"
  [enablePagination]="false"
  noRecordMessage=" {{ 'lbl_shipment_notYetAvailable' | content }}"
  errorReason="documents Api Failed"
  firstColumnSticky="true"
>
</lib-data-table>
<div class="col-sm-12" *ngIf="!documentsRes.isLoaded">
  <div class="loader" [style.height]="'286px'"></div>
</div>
<ng-template #downloadColumnTemplate let-rowData="rowData">
  <a
    class="downloadLink"
    href="javascript:void(0)"
    (click)="onDownloadLinkClicked(rowData)"
    *ngIf="!downloadLoaderMapping[rowData?.id]"
    [attr.aria-label]="'lbl_download_link_aria' | content"
    ><i
      class="symphony-icons symphony-icons-download-link link-btn-icon"
      aria-hidden="true"
    ></i
  ></a>
  <ng-container
    *ngTemplateOutlet="downloadLoader; context: { rowData: rowData }"
  >
  </ng-container>
</ng-template>

<ng-template #typeColumnTemplate let-rowData="rowData">
  <a
    class="downloadLink"
    href="javascript:void(0)"
    (click)="onDownloadLinkClicked(rowData)"
    *ngIf="!downloadLoaderMapping[rowData?.id]"
    [attr.aria-label]="'lbl_download_link_aria' | content"
    >{{ rowData["type"] }}</a
  >
  <ng-container
    *ngTemplateOutlet="downloadLoader; context: { rowData: rowData }"
  >
  </ng-container>
</ng-template>

<ng-template #downloadLoader let-rowData="rowData">
  <div class="download-loader" *ngIf="downloadLoaderMapping[rowData?.id]">
    <lib-spinner class="spinner"></lib-spinner>
    <span class="body4 downloading-text">{{
      "lbl_documents_downloading" | content
    }}</span>
  </div>
</ng-template>
