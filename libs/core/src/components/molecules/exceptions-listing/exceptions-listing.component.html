<!-- 9fbef606107a605d69c0edbcd8029e5d_SYMPHONY -->

<button
  *ngIf="!isDesktopViewport && !showUndeliveredExceptionsTable && !showLateDeliveryExceptionsTable"
  class="undelivered-exceptions-header"
  (click)="onHeaderClick()"
>
  <div>
    <i
      class="symphony-icons symphony-icons-undelivered-exceptions"
      aria-hidden="true"
    ></i>
    <span class="undelivered-exceptions-header-title">
      <span>
        {{ headerText }}
      </span>
      <span *ngIf="!hasApiFailed">
        ({{ undeliveredExcDataList?.length || 0 }})
      </span>
    </span>
  </div>

  <i
    class="angle-right symphony-icons symphony-icons-angle-right"
    aria-hidden="true"
  ></i>
</button>

<div
  class="shipment-list-table undelivered-exceptions-table"
  *ngIf="isDesktopViewport || showUndeliveredExceptionsTable || showLateDeliveryExceptionsTable"
>
  <lib-data-table
    *ngIf="columnInfo"
    [showTable]="!hasApiFailed"
    [attr.data-automation]="dataAutomationAttr + 'Card'"
    [dataAutomationHeader]="dataAutomationAttr + 'Header'"
    [dataAutomationTitle]="dataAutomationAttr + 'Title'"
    [dataAutomationTooltip]="dataAutomationAttr + '-tooltip'"
    [showInfoIcon]="showInfoIcon"
    [tableTitle]="headerText"
    [displayedColumns]="displayedColumnsForTable"
    [tableData]="undeliveredExcDataList"
    [columnInfo]="columnInfo"
    rowClickable="true"
    (emitRowData)="getClickedRowData($event)"
    firstColumnSticky="true"
    tableMinWidth="800"
    [dataAutomationAttribute]="dataAutomationAttr"
    noRecordMessage=" {{ 'lbl_no_undelivered_exceptions' | content }}"
    viewportMinWidthToShowScroll="1200"
    [pageSizePerViewport]="pageSizePerViewport"
    [customStyle]="customStyle"
    [errorReason]="errorReason"
    [pageSection]="pageSection"
    rowAriaLabel=" {{ 'lbl_click_to_view_shipment' | content }}"
    defaultSortingColumn="carrierServiceLevel"
    defaultSortingOrder="desc"
  ></lib-data-table>
</div>
